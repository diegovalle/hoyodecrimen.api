<!DOCTYPE HTML>
<!--
	Strongly Typed 1.1 by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="en">
	<head>
		<title>Crime by Sector in Mexico City</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<meta name="viewport" content="width=1040" />
		
		<script src="js/jquery.min.js"></script>
		<script src="js/jquery.dropotron.min.js"></script>
		<script src="js/config.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/skel-panels.min.js"></script>
                
                <script src="js/d3.v3.min.js"></script>
                <script src="js/topojson.v1.min.js"></script>
                <script src="js/c3.min.js"></script>
                <script src="js/d3.tip.v0.6.3.js"></script>

                <script src="js/tooltip.js" type="text/javascript"></script>
                <script src="js/underscore-min.js" type="text/javascript"></script>
                <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular.min.js"></script>
                <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"></script>
               <script src="js/angular-translate.js"></script>
               <script src="js/ng-table.min.js"></script>
 <script data-require="angular-resource@1.2.0-rc.3" data-semver="1.2.0-rc.3" src="http://code.angularjs.org/1.2.0-rc.3/angular-resource.js"></script>
<script>
var top5;
var app = angular.module('myApp', ['pascalprecht.translate','ngTable', 'ngResource'])
.controller('DemoCtrl', function($scope, $timeout, $resource, ngTableParams) {
    
    var Api = $resource('/api/v1/top/counts/change/cuadrantes/all');
    Api.get(function(data) {
                $timeout(function() {
                    // update table params
                    // params.total(data.total);
                    // set new data
                    top5 = data.rows;
params1 = new ngTableParams({
        page: 1,            // show first page
        count: 10,          // count per page
        sorting: {
            name: 'asc'     // initial sorting
        }
    }, {
        total: 0,           // length of data
        counts: [],
        getData: function($defer, params) {
            // ajax request to api
            $defer.resolve(top5)
        }
    });
params2 = new ngTableParams({
        page: 1,            // show first page
        count: 10,          // count per page
        sorting: {
            name: 'asc'     // initial sorting
        }
    }, {
        total: 0,           // length of data
        counts: [],
        getData: function($defer, params) {
            // ajax request to api
            $defer.resolve(top5)
        }
    });
params3 = new ngTableParams({
        page: 1,            // show first page
        count: 10,          // count per page
        sorting: {
            name: 'asc'     // initial sorting
        }
    }, {
        total: 0,           // length of data
        counts: [],
        getData: function($defer, params) {
            // ajax request to api
            $defer.resolve(top5)
        }
    });
params4 = new ngTableParams({
        page: 1,            // show first page
        count: 10,          // count per page
        sorting: {
            name: 'asc'     // initial sorting
        }
    }, {
        total: 0,           // length of data
        counts: [],
        getData: function($defer, params) {
            // ajax request to api
            $defer.resolve(top5)
        }
    });
params5 = new ngTableParams({
        page: 1,            // show first page
        count: 10,          // count per page
        sorting: {
            name: 'asc'     // initial sorting
        }
    }, {
        total: 0,           // length of data
        counts: [],
        getData: function($defer, params) {
            // ajax request to api
            $defer.resolve(top5)
        }
    });
$scope.tableParams1 = params1;
$scope.tableParams2 = params2;
$scope.tableParams3 = params3;
$scope.tableParams4 = params4;
$scope.tableParams5 = params5;
                }, 500);
            });
    
    
});

app.config(['$translateProvider', function ($translateProvider) {
  $translateProvider.translations('en', {
    'TITLE': 'Hello',
    'FOO': 'This is a paragraph'
  });
 
  $translateProvider.translations('de', {
    'TITLE': 'Hallo',
    'FOO': 'Dies ist ein Paragraph'
  });
 
  $translateProvider.preferredLanguage('en');
}]);





</script>
                           
<link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Arvo:700" rel="stylesheet" type="text/css" />
		<!--[if lte IE 8]><script src="js/html5shiv.js"></script><![endif]-->
                <!-- Load c3.css -->
                <link href="css/c3.css" rel="stylesheet" type="text/css">
                <link href="css/crime.css" rel="stylesheet" type="text/css">
		<noscript>
			<link rel="stylesheet" href="css/skel-noscript.css" />
			<link rel="stylesheet" href="css/style.css" />
			<link rel="stylesheet" href="css/style-desktop.css" />
                        <link rel="stylesheet" href="css/ng-table.css" />
		</noscript>
               
<style>
.c3-region {
  fill: steelblue;
  fill-opacity: .1;
}
                
</style>
	</head>
	<body class="homepage" ng-app="myApp"  ng-controller="DemoCtrl">

		<!-- Header Wrapper -->
			<div id="header-wrapper">
						
				<!-- Header -->
					<div id="header" class="container">
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
<a class="addthis_button_tweet"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-53828ddc4d27c103"></script>
<!-- AddThis Button END -->

                                          <h2 id="homicide-title"style="text-align:left;margin: 0 0 0 4em;">Homicides - Total</h2>

					  <div class="row">
                                           
					    
                                            <div class="7u">
                                              <div class="chart-crime" id="chart-homicide"></div>
                                              <a href="#" class="button" id="HomicideButton">Reset Chart to show all DF data</a>
                                            </div>
                                            <div class="4u">
                                              <div id="map-homicide" style="height:500px;">
                                                <small style="font-size:12px;text-align:left;" id="hom-date">change in homicides May-Jul 2013 to May-Jul 2014</small>
                                                <div id = "legend-homicides"></div>
                                              </div>
                                            </div>
                                          
                                          </div>
<div>

<div class="datagrid">

<table ng-table="tableParams1" class="table">
        <tr ng-repeat="cuadrante in $data | filter:'homicidio doloso'">
          <td data-title="'Rank'">{{cuadrante.rank}}</td>
          <td data-title="'Cuadrante'">{{cuadrante.cuadrante}}</td>
          <td data-title="'Sector'">{{cuadrante.sector}}</td>
          <td data-title="'Population'">{{cuadrante.population | number:0}}</td>
          <td data-title="'Period1'">{{cuadrante.period1_count}}</td>
          <td data-title="'Period2'">{{cuadrante.period2_count}}</td>
          <td data-title="'Difference'">{{cuadrante.difference}}</td>
        </tr>
</table>

</div>

</div>
                                          <hr/>
                                          <h2 id="rncv-title">VIOLENT ROBBERIES TO A BUSINESS - Total</h2>
                                          <div class="row">
					    
                                            <div class="7u">
                                              <div class="chart-crime" id="chart-rncv"></div>
<a href="#" class="button" id="RNCVButton">Reset Chart to show all DF data</a>
                                            </div>
                                            <div class="4u">
                                              <div id="map-rncv" style="height:500px">
                                                <small style="font-size:12px;text-align:left;" id="rncv-date">change in violent robberies to a business May-Jul 2013 to May-Jul 2014</small>
                                                <div id = "legend-rncv"></div>
                                              </div>
                                            </div>
                                          </div>
<div>

<div class="datagrid">
<table ng-table="tableParams2" class="table">
        <tr ng-repeat="cuadrante in $data | filter:'robo a negocio c.v.'">
          <td data-title="'Rank'">{{cuadrante.rank}}</td>
          <td data-title="'Cuadrante'">{{cuadrante.cuadrante}}</td>
          <td data-title="'Sector'">{{cuadrante.sector}}</td>
          <td data-title="'Population'">{{cuadrante.population | number:0}}</td>
          <td data-title="'Period1'">{{cuadrante.period1_count}}</td>
          <td data-title="'Period2'">{{cuadrante.period2_count}}</td>
          <td data-title="'Difference'">{{cuadrante.difference}}</td>
        </tr>
</table>

</div>

</div>
                                          <hr/>
                                          <h2 id="rvcv-title">VIOLENT CAR ROBBERIES- Total</h2>
                                          <div class="row">
					    
                                            <div class="7u">
                                              <div class="chart-crime" id="chart-rvcv"></div>
                                              <a href="#" class="button" id="RVCVButton">Reset Chart to show all DF data</a>
                                            </div>
                                            <div class="4u">
                                              <div id="map-rvcv" style="height:500px">
                                                <small style="font-size:12px;text-align:left;" id="rvcv-date">change in violent car robberies May-Jul 2013 to May-Jul 2014</small>
                                                 <div id = "legend-rvcv"></div>
                                              </div>
                                            </div>
                                          </div>
<div>

<div class="datagrid">
<table ng-table="tableParams3" class="table">
        <tr ng-repeat="cuadrante in $data | filter:'robo de vehiculo automotor c.v.'">
          <td data-title="'Rank'">{{cuadrante.rank}}</td>
          <td data-title="'Cuadrante'">{{cuadrante.cuadrante}}</td>
          <td data-title="'Sector'">{{cuadrante.sector}}</td>
          <td data-title="'Population'">{{cuadrante.population | number:0}}</td>
          <td data-title="'Period1'">{{cuadrante.period1_count}}</td>
          <td data-title="'Period2'">{{cuadrante.period2_count}}</td>
          <td data-title="'Difference'">{{cuadrante.difference}}</td>
        </tr>
</table>

</div>

</div>
                                          <hr/>
                                          <h2 id="rvsv-title">NON-VIOLENT CAR ROBBERIES - Total</h2>
                                          <div class="row">
					    
                                            <div class="7u">
                                              <div class="chart-crime" id="chart-rvsv"></div>
                                              <a href="#" class="button" id="RVSVButton">Reset Chart to show all DF data</a>
                                            </div>
                                            <div class="4u">
                                              <div id="map-rvsv" style="height:500px">
                                                <small style="font-size:12px;text-align:left;" id="rvsv-date">change in non-violent car robberies May-Jul 2013 to May-Jul 2014</small>
                                                 <div id = "legend-rvsv"></div>
                                              </div>
                                            </div>
                                          </div>
<div>

<div class="datagrid">
<table ng-table="tableParams4" class="table">
        <tr ng-repeat="cuadrante in $data | filter:'robo de vehiculo automotor s.v.'">
          <td data-title="'Rank'">{{cuadrante.rank}}</td>
          <td data-title="'Cuadrante'">{{cuadrante.cuadrante}}</td>
          <td data-title="'Sector'">{{cuadrante.sector}}</td>
          <td data-title="'Population'">{{cuadrante.population | number:0}}</td>
          <td data-title="'Period1'">{{cuadrante.period1_count}}</td>
          <td data-title="'Period2'">{{cuadrante.period2_count}}</td>
          <td data-title="'Difference'">{{cuadrante.difference}}</td>
        </tr>
</table>

</div>

</div>
                                          <hr/>
                                          <h2 id="rvsv-title">Rape - Total</h2>
                                          <div class="row">
					    
                                            <div class="7u">
                                              <div class="chart-crime" id="chart-viol"></div>
                                              <a href="#" class="button" id="RapeButton">Reset Chart to show all DF data</a>
                                            </div>
                                            <div class="4u">
                                              <div id="map-viol" style="height:500px">
                                                <small style="font-size:12px;text-align:left;" id="vol-date">change in rapes May-Jul 2013 to May-Jul 2014</small>
                                                 <div id = "legend-viol"></div>
                                              </div>
                                            </div>
                                          </div>
<div>

<div class="datagrid">
<table ng-table="tableParams5" class="table">
        <tr ng-repeat="cuadrante in $data | filter:'violacion'">
          <td data-title="'Rank'">{{cuadrante.rank}}</td>
          <td data-title="'Cuadrante'">{{cuadrante.cuadrante}}</td>
          <td data-title="'Sector'">{{cuadrante.sector}}</td>
          <td data-title="'Population'">{{cuadrante.population | number:0}}</td>
          <td data-title="'Period1'">{{cuadrante.period1_count}}</td>
          <td data-title="'Period2'">{{cuadrante.period2_count}}</td>
          <td data-title="'Difference'">{{cuadrante.difference}}</td>
        </tr>
</table>

</div>

</div>
                                          
						<!-- Logo -->
							<!--<h1 id="logo"><a href="#">Strongly Typed</a></h1>
							<p>A responsive HTML5 site template. Manufactured by HTML5 UP.</p>-->
						
						<!-- Nav -->
							<nav id="nav">
								<ul>
									<li><a class="fa fa-home" href="//www.diegovalle.net/maps/cuadrantes-delictivos/"><span>Rates (Sectors)</span></a></li>
                                                                        <li><a class="fa fa-bar-chart-o" href="counts.html"><span>Counts (Quadrants)</span></a></li>
									<li>
										<a href="#" class="fa fa-map-marker"><span>Interactive Maps</span></a>
										
										<ul>
											<li><a href="sectores.html">Sectors (rates)</a></li>
											
                                                                                        <li><a href="cuadrantes.html">Quadrants (counts)</a></li>
											
										</ul>
                                                                                
									</li>
                                                                        <li><a class="fa fa-signal" href="other.html">Charts</span></a></li>
								</ul>
							</nav>


					</div>

			</div>
			
	

		<!-- Footer Wrapper -->
			<div id="footer-wrapper">

				<!-- Footer -->
					<div id="footer" class="container">
						<header>
							<h2>Questions or comments? <strong>Get in touch:</strong></h2>
						</header>
						<div class="row">
							<div class="6u">
							Crime data from a <a href="https://github.com/diegovalle/crimeDF/tree/master/sspdf-data">FOIA request</a> to the SSPDF. Cuadrante coordinates scraped from <a href="http://201.144.220.174/pid/gps/cuadrantesWeb.php">Consulta de Cuadrantes</a>. The population figures are based on the <a href="http://blog.diegovalle.net/2013/06/shapefiles-of-mexico-agebs-manzanas-etc.html">2010 Census by Manzana</a>. Visit the <a href="http://blog.diegovalle.net/2014/05/crime-in-mexico-city-at-cuadrante.html">blog post</a>.
							</div>
							<div class="6u">
								<section>
									
									<div class="row">
										<ul class="icons 6u">
											<li class="fa fa-github">
												<a href="http://github.com/diegovalle">@diegovalle</a>
											</li>
											<li class="fa fa-envelope">
												<a href="mailto:diegovalle@gmail.com">diegovalle@gmail.com</a>
											</li>
										</ul>
										<ul class="icons 6u">
											<li class="fa fa-twitter">
												<a href="http://twitter.com/diegovalle">@diegovalle</a>
											</li>
											<li class="fa fa-facebook">
												<a href="http://www.facebook.com/diegovalle">facebook.com/diegovalle</a>
											</li>
											<li class="fa fa-google-plus">
												<a href="https://plus.google.com/112417668983107842349?rel=author">google.com/+DiegoValleJones</a>
											</li>
										</ul>
									</div>
								</section>
							</div>
						</div>
					</div>

				<!-- Copyright -->
					<div id="copyright" class="container">
						<ul class="links">
							<li>&copy; Diego Valle-Jones. All rights reserved</li>
							<li>Design: <a href="http://html5up.net/">HTML5 UP</a></li>
						</ul>
					</div>

			</div>

                        <script>
var topoName = 'cuadrantes-change';    
var mapFile = "js/cuadrantes.json";
var crimeFile = "js/hom-dol-cuad.js";
var mapColors = {hom:"BrBGq", rncv:"PiYGq", rvcv:"PRGnq",
rvsv:"PuOrq", viol:"RdGyq"};


crimePrefix = 'number of ';
document.getElementById("HomicideButton").onclick = function (event) { 
event.preventDefault(); 
d3.select('#homicide-title').text('Homicides - DF Total');
chartHomicides.load({
                columns: [HomicidesA],
            }); };

document.getElementById("RNCVButton").onclick = function (event) { 
event.preventDefault(); 
d3.select('#rncv-title').text('Robberies to a business with violence - DF Total');
chartrncv.load({
                columns: [rncvA],
            }); };

document.getElementById("RVCVButton").onclick = function (event) { 
event.preventDefault(); 
d3.select('#rvcv-title').text('Violent car robberies - DF Total');
chartrvcv.load({
                columns: [rvcvA],
            }); };

document.getElementById("RVSVButton").onclick = function (event) { 
event.preventDefault(); 
d3.select('#rvsv-title').text('Non-violent car robberies - DF Total');
chartrvsv.load({
                columns: [rvsvA],
            }); };

document.getElementById("RapeButton").onclick = function (event) { 
event.preventDefault(); 
d3.select('#viol-title').text('Rapes - DF Total');
chartviol.load({
                columns: [violA],
            }); };
</script>
<script src="js/maps.js"></script>
<script id="deferedjs" type="text/javascript">
    var _gaq=[['_setAccount','UA-100264-1'],['_trackPageview']]; // Change UA-XXXXX-X to be your site's ID
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
      g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g,s)}(document,'script'));
    _gaq.push(['_setSiteSpeedSampleRate', 5]);  //Measure Page Speed

    </script>
	</body>
</html>
